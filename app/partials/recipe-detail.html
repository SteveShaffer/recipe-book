<!--suppress HtmlFormInputWithoutLabel -->
<form ng-submit="saveRecipe()">
  <div class="row-fluid">
    <div class="span9">
      <h1 ng-hide="editMode">{{ recipe.name }}</h1>
      <p>
        <input class="h1 span12" type="text" ng-model="recipe.name" placeholder="Name"
               ng-show="editMode" required />
      </p>
    </div>
    <div class="span3">
      <div class="edit-controls btn-group pull-right" ng-hide="editMode">
        <button class="btn" type="button"
                ng-click="editRecipe()">
          <i class="icon-edit"></i> Edit
        </button>
        <button class="btn" type="button" ng-click="deleteRecipe()">
          <i class="icon-remove-circle"></i> Delete
        </button>
      </div>
      <div class="edit-controls btn-group pull-right" ng-show="editMode">
        <button class="btn" type="submit">
          <i class="icon-check"></i> Save
        </button>
        <button class="btn" type="button" ng-click="resetRecipe()">
          <i class="icon-remove"></i> Cancel
        </button>
      </div>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span6">
      <h2>Details</h2>
      <p ng-hide="editMode"><em>{{ recipe.description }}</em></p>
      <textarea class="span12" placeholder="Description"
                ng-model="recipe.description" ng-show="editMode"></textarea>
      <table class="span12 table" ng-hide="editMode">
        <tbody>
          <tr>
            <th class="span6">Makes</th>
            <td class="span6">
              {{ recipe.makes.quantity }} {{ recipe.makes.unit }}
            </td>
          </tr>
          <tr>
            <th class="span6">Serves</th>
            <td class="span6">
              {{ recipe.serves.quantity }} People
            </td>
          </tr>
          <tr>
            <th class="span6">Cooking Time</th>
            <td class="span6">
              {{ recipe.cooking_time.quantity }} Minutes
            </td>
          </tr>
        </tbody>
      </table>
      <table class="span12 table" ng-show="editMode">
        <tbody>
          <tr>
            <th class="span4">Makes</th>
            <td class="span4">
              <input type="number" class="span12"
                     ng-model="recipe.makes.quantity"/>
            </td>
            <td class="span4">
              <input type="text" class="span12"
                     ng-model="recipe.makes.unit" />
            </td>
          </tr>
          <tr>
            <th class="span4">Serves</th>
            <td class="span4">
              <input type="number" class="span12"
                     ng-model="recipe.serves.quantity"/>
            </td>
            <td class="span4">
              People
            </td>
          </tr>
          <tr>
            <th class="span4">Cooking Time</th>
            <td class="span4">
              <input type="number" class="span12"
                     ng-model="recipe.cooking_time.quantity" />
            </td>
            <td class="span4">
              Minutes
            </td>
          </tr>
        </tbody>
      </table>
      <h2>Ingredients</h2>
      <ol>
        <li ng-hide="editMode" ng-repeat="ingredient in recipe.ingredients">
          {{ ingredient.text }} <!--TODO: Do we need to make this available
          to be dynamic on the client side as well?  If so,
          we probably need to do some JS library work here-->
        </li>
        <li ng-show="editMode" ng-repeat="ingredient in recipe.ingredients">
          <input type="number" class="span2" ng-model="ingredient.quantity" />
          <input type="text" class="span4" ng-model="ingredient.unit" />
          <input type="text" class="span6" ng-model="ingredient.description" />
        </li>
        <li ng-show="editMode">
          <a ng-click="addIngredient()">
            <i class="icon-plus-sign"></i> New...
          </a>
        </li>
      </ol>
    </div>
    <div class="span6">
      <h2>Instructions</h2>
      <ol>
        <li ng-hide="editMode" ng-repeat="instruction in recipe.instructions">
          {{ instruction.description }}
        </li>
        <li ng-show="editMode" ng-repeat="instruction in recipe.instructions">
          <textarea class="span12" ng-model="instruction.description">
          </textarea>
        </li>
        <li ng-show="editMode">
          <a ng-click="addInstruction()">
            <i class="icon-plus-sign"></i> New...
          </a>
        </li>
      </ol>
    </div>
  </div>
</form>